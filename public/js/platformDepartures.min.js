function getTrains(a){sIDs=[],$.get("assets/getDeparturesPlatformTest1.json",function(b){if($(".departureEntry.error, .departureEntry.noDepartures").remove(),"No response"===b)responseError=!0;else if(null!=b.GetStationBoardResult)0===$(".noDepartures").length;else if(b[platform].length>0)if(null!=b[platform][0]){var c=b[platform][0];if(r=c,$(".platformBoard .row:nth-child(1)").attr("id")!=sanitizeID(c.serviceID)&&console.log("s changed"),$(".platformBoard .row:nth-child(1)").html(wipeHTML+departureHTML(c,1)).attr("id",sanitizeID(c.serviceID)),null!=c.subsequentCallingPoints){var d='<p class="callingTitle">Calling at: </p><div class="callingListCont"><p>',e="";if(Array.isArray(c.subsequentCallingPoints.callingPointList)){var f=c.subsequentCallingPoints.callingPointList.length;$.each(c.subsequentCallingPoints.callingPointList,function(a,b){e+=callingPoints(b.callingPoint),a!=f-1&&(e+=", ")})}else e+=callingPoints(c.subsequentCallingPoints.callingPointList.callingPoint);d+=e,d+="</p></div>",$(".platformBoard .row:nth-child(2) div p").html()!=e&&$(".platformBoard .row:nth-child(2)").html(wipeHTML+d),calling=!0}else calling=!1;"true"===futureDepartures&&(nextRow=calling?3:2,null!=b[platform][1]&&(calling&&3===rows||!calling)&&($(".platformBoard .row:nth-child("+nextRow+")").html(wipeHTML+departureHTML(b[platform][1],2)).attr("id",sanitizeID(b[platform][1].serviceID)),nextRow++),null==b[platform][2]||calling||3!==rows||($(".platformBoard .row:nth-child("+nextRow+")").html(wipeHTML+departureHTML(b[platform][2],3)).attr("id",sanitizeID(b[platform][2].serviceID)),nextRow++))}else console.log("no dep");"function"==typeof a&&a()})}function departureHTML(a,b){var c="";if("true"===futureDepartures&&(c+='<p class="depNo">',c+=1===b?"1st":2===b?"2nd":3===b?"3rd":b+"th",c+="</p>"),c+='<p class="std">',null!=a.std&&(c+=a.std),c+="</p>",c+='<p class="destinationName">',null!=a.destination.location)if(a.destination.location.length>1){var d=0;$.each(a.destination.location,function(a,b){0!=d&&(c+=" &amp; "),c+=b.locationName,d++})}else c+=a.destination.location.locationName;return c+="</p>",c+='<p class="etd">',null!=a.etd&&(c+=a.etd),c+="</p>"}function callingPoints(a){var b="";if(Array.isArray(a)){var c=a.length;$.each(a,function(a,d){a===c-1?b+=", and ":a>0&&(b+=", "),b+=d.locationName})}else{var d=a;b+=d.locationName}return b}function scrollCalling(){var a=$(".callingListCont p"),b=a.outerWidth();b>a.parent().width()?(a.css("left","1510px"),scrollAnimation(a,.2,scrollCalling)):a.css("transition","").css("left","0")}var sIDs=[],stationCode=getQueryVariable("station"),platform=getQueryVariable("platform").toUpperCase(),futureDepartures=getQueryVariable("futDep"),showTime=getQueryVariable("time");if(null!=getQueryVariable("rows")&&parseInt(getQueryVariable("rows"))<4)var rows=parseInt(getQueryVariable("rows"));else var rows=3;var responseError=!1,r,nextRow,calling,wipeHTML='<div class="wipe"></div>';"true"===futureDepartures&&$(".platformBoard").addClass("futDep"),"true"===showTime&&$(".time").show();var sync=setInterval(function(){responseError===!1&&getSecs()%10===0?clearInterval(sync):responseError&&clearInterval(sync)},100);getTrains(scrollCalling);